import React from "react";
import Accordion from 'react-bootstrap/Accordion'
import 'bootstrap/dist/css/bootstrap.min.css';
import VulnerabilityProjectCard from "../common/VulnerabilityProjectCard";
import {
  Row,
  Card,
  CardHeader,
} from "reactstrap";

const VulnerabilityStatTable = (props) => {
  return (
    <Card className="shadow">
        <CardHeader className="border-0">
          <Row className="align-items-center">
            {props.title &&
              <div className="col">
                <h3 className="mb-0">{props.title}</h3>
              </div>
            }
          </Row>
        </CardHeader>
        {props.stats && props.stats.map(blobInfo => {
          return (
            <Accordion key={blobInfo.hash}>
              <Accordion.Item eventKey="0">
                <Accordion.Header>
                      <p>
                        {blobInfo.hash}
                      </p>
                </Accordion.Header>
                <Accordion.Body>
                  {blobInfo.commits && blobInfo.commits.map(commit => {
                    return (
                      <Accordion key={commit.commit}>
                        <Accordion.Item eventKey="0">
                          <Accordion.Header>
                            {commit.author}
                          </Accordion.Header>
                          <Accordion.Body>
                            {commit.projects && commit.projects.names.map(project => {return {name: project, url: commit.projects.urls[commit.projects.names.indexOf(project)]}}).map(project => {
                              return (                           
                                  <VulnerabilityProjectCard
                                  key={project.name}
                                  title="Project Name"
                                  pname={project.name}
                                  url = {project.url}
                                  author= {commit.commit}
                                  icon="far fa-folder"
                                  color="bg-info"
                                  />
                              )
                            })}
                          </Accordion.Body>
                        </Accordion.Item>
                      </Accordion>
                    )
                  })}
                </Accordion.Body>

              </Accordion.Item>
            </Accordion>
          )
        })}
    </Card>
  );
}
export default VulnerabilityStatTable;