import React, { Component } from 'react';
import { withRouter } from "react-router-dom";
import { connect } from 'react-redux';
import Custom_InputBox from '../common/custom_inputbox';
import Process_Container from '../common/process_container';
import axios from "axios";

import {
	Button,
	Card,
	CardBody,
	Label,
	FormGroup,
} from "reactstrap";
import { Paper, Typography } from '@material-ui/core';

class VulnerabilitySearchForm extends Component {
	state = 
	{
		name:"",
		searchedName:"",
		status:0,

	};

	getValue = (e) => {
		this.setState({name:e.target.value});
	}

	onSubmit = (e) =>
	{
		e.preventDefault();
		this.setState({searchedName:this.state.name});
		this.setState({status:1});
		axios.post('/api/vulnerability', this.state)
		.then(response => console.log(response.data))
		.catch(error => console.error(error));
	}

	generatecard() {
			return(	
			<CardBody className="px-lg-5 py-lg-5">
				<form onSubmit={this.onSubmit}> 
					<Custom_InputBox 
					placeholder="SEARCH"
					getValue = {this.getValue}
				/> 
				</form>
 		        <Process_Container
				 name={this.state.searchedName} status={this.state.status}></Process_Container>
			</CardBody>
			)
	}

	render() {
		return (
			  <Card className="bg-secondary shadow border-0" style={{ width: '30rem'}}>
		        {this.generatecard()}
			  </Card>
		);
	}
}

VulnerabilitySearchForm.propTypes = {
}

function mapStateToProps(state) {
	return {

	};
}

export default connect(mapStateToProps, {})(withRouter(VulnerabilitySearchForm));